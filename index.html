<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Botanica | Lush & Alive</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,800;1,400;1,600&family=Manrope:wght@200;300;400;500;600;700&family=Poppins:wght@300;400;500;600;700;800;900&family=Noto+Serif+JP:wght@400;700&display=swap" rel="stylesheet">
    <!-- React & DOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* --- 1. Reset & Base --- */
        :root {
            --cursor-size: 20px;
            --cursor-outline-size: 60px;
            --color-accent: #bef264; /* Acid Lime */
            --color-dark: #020617;
            --color-forest: #052e16;
        }

        body {
            font-family: 'Manrope', sans-serif;
            background-color: var(--color-dark);
            color: #e2e8f0; 
            overflow-x: hidden;
            /* Default cursor for mobile/touch */
            cursor: auto;
            -webkit-tap-highlight-color: transparent;
            transition: background-color 1.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        /* Only hide cursor on non-touch devices (Desktop) */
        @media (min-width: 768px) {
            body {
                cursor: none;
            }
        }

        /* Smooth Scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Selection Color */
        ::selection {
            background: var(--color-accent);
            color: var(--color-dark);
        }

        /* --- 2. Typography --- */
        h1, h2, h3, .serif-font {
            font-family: 'Playfair Display', serif;
        }
        .japan-font {
            font-family: 'Noto Serif JP', serif;
        }
        .poppins-font {
            font-family: 'Poppins', sans-serif;
        }
        
        .text-outline {
            -webkit-text-stroke: 1px rgba(255,255,255,0.2);
            color: transparent;
        }

        /* --- 3. Animations & Effects --- */
        
        /* Noise Texture */
        .noise-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 5;
            opacity: 0.04;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        /* Custom Cursor - Hidden on Mobile via Tailwind classes in JS */
        .cursor-dot,
        .cursor-outline {
            position: fixed;
            top: 0;
            left: 0;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            z-index: 9999;
            pointer-events: none;
        }
        .cursor-dot {
            width: var(--cursor-size);
            height: var(--cursor-size);
            background-color: var(--color-accent);
        }
        .cursor-outline {
            width: var(--cursor-outline-size);
            height: var(--cursor-outline-size);
            border: 1px solid rgba(190, 242, 100, 0.5);
            transition: width 0.2s, height 0.2s, background-color 0.2s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        .animate-float { animation: float 8s ease-in-out infinite; }

        @keyframes slowRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .animate-spin-slow { animation: slowRotate 20s linear infinite; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); filter: blur(10px); }
            to { opacity: 1; transform: translateY(0); filter: blur(0); }
        }
        .animate-fade-in { animation: fadeIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        
        @keyframes revealText {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        .reveal-container { overflow: hidden; }
        .reveal-text { animation: revealText 1s cubic-bezier(0.16, 1, 0.3, 1) forwards; }

        /* Speed Line Animation for Delivery Page */
        @keyframes speedLine {
            0% { transform: translateX(-100%); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateX(100%); opacity: 0; }
        }
        .speed-line {
            animation: speedLine 1s linear infinite;
        }

        /* --- 4. Component Styles --- */
        
        .btn-modern {
            position: relative;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
        }
        .btn-modern::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--color-accent);
            transform: translateY(100%);
            transition: transform 0.5s cubic-bezier(0.19, 1, 0.22, 1);
            z-index: 0;
        }
        .btn-modern:hover::after {
            transform: translateY(0);
        }
        .btn-modern span, .btn-modern i {
            position: relative;
            z-index: 1;
            transition: color 0.5s;
        }
        .btn-modern:hover span, .btn-modern:hover i {
            color: #000;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        
        /* Mobile Menu Glass */
        .glass-overlay {
            background: rgba(2, 6, 23, 0.95);
            backdrop-filter: blur(15px);
        }
        
        /* --- NEW THEME CLASSES --- */
        .luxe-page {
            background-color: #000000;
            background-image: radial-gradient(circle at 50% 0%, #1a1a1a, #000000);
            min-height: 100vh;
            font-family: 'Poppins', sans-serif;
        }
        /* Luxe Card Styles */
        .luxe-card-premium {
            background: #0a0a0a;
            border: 1px solid #333;
            transition: all 0.4s ease;
        }
        .luxe-card-premium:hover {
            border-color: #fbbf24;
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(251, 191, 36, 0.2);
        }
        .luxe-card-premium .card-img {
            opacity: 0.8;
        }
        .luxe-card-premium:hover .card-img {
            opacity: 1;
            transform: scale(1.05);
        }
        .gold-gradient-text {
            background: linear-gradient(to right, #fcd34d, #f59e0b, #d97706);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* DELIVERY PAGE STYLES */
        .delivery-page {
            background-color: #1e1b4b;
            background-image: linear-gradient(135deg, #312e81 0%, #1e1b4b 100%);
            min-height: 100vh;
            font-family: 'Poppins', sans-serif;
        }
        .delivery-card {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        .delivery-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-5px);
            border-color: #a855f7;
            box-shadow: 0 10px 30px rgba(168, 85, 247, 0.3);
        }

        .japan-page {
            background-color: #1c1917; /* Warm dark stone */
            min-height: 100vh;
        }
        .japan-card {
            background: rgba(255,245,245,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.4s ease;
        }
        .japan-card:hover {
            border-color: #fca5a5; /* Sakura Pink */
            transform: translateY(-5px);
            box-shadow: 0 15px 40px -10px rgba(252, 165, 165, 0.2);
        }
        .tools-page {
            background-color: #334155;
            min-height: 100vh;
        }
        
        .product-card-modern {
            transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        /* Hover effect only on desktop */
        @media (min-width: 768px) {
            .product-card-modern:hover .card-img {
                transform: scale(1.05);
            }
            .product-card-modern:hover .quick-add {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Form Inputs */
        .input-modern {
            background: transparent;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            border-radius: 0;
            padding: 16px 0;
            color: white;
            font-size: 1.1rem;
            width: 100%;
            outline: none;
            transition: border-color 0.3s;
        }
        .input-modern:focus {
            border-color: var(--color-accent);
        }
        .input-modern::placeholder { color: rgba(255,255,255,0.3); }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #020617; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--color-accent); }
        
        /* Utilities */
        .text-accent { color: var(--color-accent); }
        .bg-accent { background-color: var(--color-accent); }
        .border-accent { border-color: var(--color-accent); }
    </style>
</head>
<body>
    <div class="noise-overlay"></div>
    <div id="cursor-dot" class="cursor-dot hidden md:block"></div>
    <div id="cursor-outline" class="cursor-outline hidden md:block"></div>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        // --- CONSTANTS ---
        const CURRENCIES = {
            USD: { symbol: '$', rate: 1, flag: 'USA' },
            INR: { symbol: '₹', rate: 84, flag: 'IND' },
            EUR: { symbol: '€', rate: 0.92, flag: 'EUR' },
            JPY: { symbol: '¥', rate: 150, flag: 'JPN' }
        };

        const TRANSLATIONS = {
            EN: {
                welcome: "The Collection",
                ready: "Nature. Redefined.",
                luxeBtn: "Super Luxe",
                deliveryBtn: "15 Min Delivery",
                japanBtn: "Zen Japan",
                toolsBtn: "Workshop",
                homeBtn: "Home",
                saleEnd: "Flash Deal Ends",
                sort: "Sort",
                flag: "EN",
                addToCart: "Add to Cart",
                cart: "Cart",
                checkout: "Checkout",
                emptyCart: "Your sanctuary is empty.",
                total: "Total",
                continueShop: "Explore",
                orderSummary: "Summary",
                subtotal: "Subtotal",
                shipping: "Shipping",
                free: "Complimentary",
                shippingDetails: "Shipping",
                paymentDetails: "Payment",
                fullName: "Name",
                email: "Email",
                address: "Address",
                city: "City",
                zip: "Postal Code",
                cardNum: "Card Details",
                expiry: "MM/YY",
                cvv: "CVC",
                placeOrder: "Confirm Purchase",
                backToCart: "Return"
            },
            // ... (Other languages same as before)
             HI: {
                welcome: "स्वागत है",
                ready: "बढ़ने के लिए तैयार?",
                luxeBtn: "सुपर लक्स",
                deliveryBtn: "15 मिनट डिलीवरी",
                japanBtn: "ज़ेन जापान",
                toolsBtn: "कार्यशाला",
                homeBtn: "घर",
                saleEnd: "फ्लैश डील समाप्त",
                sort: "क्रम",
                flag: "HI",
                addToCart: "कार्ट में जोड़ें",
                cart: "आपकी कार्ट",
                checkout: "चेकआउट",
                emptyCart: "आपकी कार्ट खाली है।",
                total: "कुल",
                continueShop: "खरीदारी जारी रखें",
                orderSummary: "ऑर्डर सारांश",
                subtotal: "उपयोगकर्ता योग",
                shipping: "शीपिंग",
                free: "मुफ़्त",
                shippingDetails: "शिपिंग विवरण",
                paymentDetails: "भुगतान जानकारी",
                fullName: "पूरा नाम",
                email: "ईमेल पता",
                address: "पता",
                city: "शहर",
                zip: "पिन कोड",
                cardNum: "कार्ड नंबर",
                expiry: "समाप्ति",
                cvv: "सीवीवी",
                placeOrder: "ऑर्डर की पुष्टि करें",
                backToCart: "वापस कार्ट में"
            },
            FR: {
                welcome: "Bienvenue",
                ready: "Prêt à grandir?",
                luxeBtn: "Super Luxe",
                deliveryBtn: "Livraison 15 Min",
                japanBtn: "Zen Japon",
                toolsBtn: "Atelier",
                homeBtn: "Accueil",
                saleEnd: "Vente Flash Fin",
                sort: "Trier",
                flag: "FR",
                addToCart: "Ajouter au Panier",
                cart: "Votre Panier",
                checkout: "Payer",
                emptyCart: "Votre panier est vide.",
                total: "Total",
                continueShop: "Continuer vos achats",
                orderSummary: "Récapitulatif",
                subtotal: "Sous-total",
                shipping: "Livraison",
                free: "Gratuit",
                shippingDetails: "Détails d'expédition",
                paymentDetails: "Informations de paiement",
                fullName: "Nom complet",
                email: "Adresse e-mail",
                address: "Adresse",
                city: "Ville",
                zip: "Code postal",
                cardNum: "Numéro de carte",
                expiry: "Expiration",
                cvv: "CVV",
                placeOrder: "Confirmer la commande",
                backToCart: "Retour au panier"
            }
        };

        const isFriday = new Date().getDay() === 5;

        // --- DATA ---
        const products = {
            // RESTORED: Original Zen Japan Page Items
            bonsai: [
                { id: 1, name: "Missouri Botanical Plant", price: 1210, age: "18 Years", img: "https://i0.wp.com/discoverandshare.org/wp-content/uploads/2025/07/79b71-evt_japanesefestival_jjmueller_8593.jpg?fit=1200%2C800&ssl=1" },
                { id: 2, name: "Ficus Ginseng Bonsai", price: 0990, age: "12 Years", img: "https://www.chhajedgarden.com/cdn/shop/products/WhatsAppImage2023-01-23at4.51.52PM.jpg?v=1674473011" },
                { id: 4, name: "Elm Bonsai", price: 1750, age: "25 Years", img: "https://th.bing.com/th/id/OIP.FWKidXB5w4CBQHFr92WN9AHaJ2?w=140&h=186&c=7&r=0&o=7&cb=ucfimg2&dpr=1.3&pid=1.7&rm=3&ucfimg=1" },
                { id: 101, name: "Jade Bonsai", price: 30, age: "3 Years", img: "https://tse1.mm.bing.net/th/id/OIP.-t71eMJBdqmdk-ZdrZ3XVgHaE7?cb=ucfimg2&ucfimg=1&rs=1&pid=ImgDetMain&o=7&rm=3" },
                { id: 102, name: "Crassula Bonsai",  price: 40, age: "5 Years", img: "https://th.bing.com/th/id/R.b232948a9c3c2214c9289bb4720afc10?rik=iIwxJkhDz1rtOg&riu=http%3a%2f%2f1.bp.blogspot.com%2f_hKVY5c_pOcg%2fTCutBWXdHTI%2fAAAAAAAAArA%2fNwx0qgZ01VQ%2fs1600%2fcrassula.JPG&ehk=gplrjPQkKSYuNsx47l59zC%2fGc9VsKAkwqpf1oMUyvj0%3d&risl=&pid=ImgRaw&r=0" },
                { id: 103, name: "Portulacaria Bonsai", price: 25, age: "4 Years", img: "https://th.bing.com/th/id/OIP.mhlmRHLFQPFz3sEr_Qr1bAHaJQ?w=163&h=204&c=7&r=0&o=7&cb=ucfimg2&dpr=1.3&pid=1.7&rm=3&ucfimg=1" }
            ],
            // NEW: Separated Super Luxe Items
            luxe: [
                { id: 901, name: "Yamaki Pine", price: 3339.70, age: "375 Years", img: "https://a-z-animals.com/media/2022/12/yamaki-pine.jpeg", desc: "A living legend. This white pine has survived for centuries, embodying resilience and grace.", tag: "Masterpiece" },
                { id: 902, name: "Fine Needle Pine", price: 2783.08, age: "150 Years", img: "https://cdn.shopify.com/s/files/1/0891/6016/files/kotobuki_japanese_black_pine_large.jpg?13543216140800751982", desc: "Exquisite Japanese Black Pine with highly refined needle structure.", tag: "Premium" },
                { id: 903, name: "Sargent Juniper", price: 1113.23, age: "200 Years", img: "https://nickomargolies.com/wp-content/uploads/2018/11/bonsai-tree-sargent-juniper.jpg", desc: "Ancient Shimpaku Juniper featuring dramatic deadwood features.", tag: "Rare" },
            ],
            plants: [
                { id: 3, name: "Golden Ficus", price: 89, scientific: "Ficus microcarpa", age: "8 Years", img: "https://images.unsplash.com/photo-1613143586836-391494917454?auto=format&fit=crop&q=80&w=800", tag: "Bestseller", vibe: "Abundance", desc: "Thick, prosperous roots and canopy." },
                { id: 5, name: "Neon Pothos", price: 35, type: "Vine", img: "https://images.unsplash.com/photo-1600411833196-7c1f6b1a8b90?auto=format&fit=crop&q=80&w=800", tag: "Vibrant" },
                { id: 6, name: "Purple Calathea", price: 45, type: "Prayer Plant", img: "https://images.unsplash.com/photo-1622370773820-22e6b208940c?auto=format&fit=crop&q=80&w=800", tag: "Dynamic" },
                { id: 7, name: "Giant Monstera", price: 75, type: "Jungle", img: "https://images.unsplash.com/photo-1614594975525-e45190c55d0b?auto=format&fit=crop&q=80&w=800", tag: "Statement" },
            ],
            express: [
                 { id: 18, name: "Rose Plant", price: 20, type: "Flowering", img: "https://www.gardenerreport.com/wp-content/uploads/2021/06/0_InShot_20210612_232821482.jpg", tag: "Fast", vibe: "Romance", blackFriday: true },
                 { id: 19, name: "Sunflower", price: 15, type: "Sun", img: "https://th.bing.com/th/id/OIP.E4w9-69IMs-UnI4RvjBz8gHaJQ?w=202&h=320&c=7&r=0&o=7&cb=ucfimg2&dpr=1.3&pid=1.7&rm=3&ucfimg=1", tag: "Fast", vibe: "Bright" },
                 { id: 20, name: "Money Plant", price: 12, type: "Vine", img: "https://tse1.mm.bing.net/th/id/OIP.G-zuEkEYyXGQmuAL6NcZ9gHaHa?cb=ucfimg2&ucfimg=1&rs=1&pid=ImgDetMain&o=7&rm=3", tag: "Fast", vibe: "Wealth", blackFriday: true },
                 { id: 21, name: "Purple Heart", price: 18, type: "Decor", img: "https://th.bing.com/th/id/OIP.XC2RUhv5Jth8A_JGRXWOvgHaHa?w=171&h=180&c=7&r=0&o=7&cb=ucfimg2&dpr=1.3&pid=1.7&rm=3&ucfimg=1", tag: "Fast", vibe: "Color" },
            ],
            indian: [
                { id: 14, name: "Hibiscus Red", price: 25, type: "Flowering", img: "https://th.bing.com/th/id/OIP.9yZ3hTzKOvGHmd2WfmAiyQHaHa?w=174&h=180&c=7&r=0&o=7&cb=ucfimg2&dpr=1.3&pid=1.7&rm=3&ucfimg=1", tag: "Vibrant", vibe: "Worship" },
                { id: 15, name: "Marigold", price: 15, type: "Festival", img: "https://th.bing.com/th/id/OIP.LLpYZjEQlzTQRlwXM1rkfQAAAA?w=120&h=182&c=7&r=0&o=7&cb=ucfimg2&dpr=1.3&pid=1.7&rm=3&ucfimg=1", tag: "Traditional", vibe: "Celebration" },
                { id: 16, name: "Cactus Plant", price: 20, type: "Succulent", img: "https://th.bing.com/th/id/OIP.BRONqKbvw7BQwDiw5zuYxgHaLH?w=115&h=180&c=7&r=0&o=7&cb=ucfimg2&dpr=1.3&pid=1.7&rm=3&ucfimg=1", tag: "Hardy", vibe: "Resilient" },
            ],
            tools: [
                { id: 11, name: "Samurai Shears", price: 65, type: "Cutter", img: "https://images.unsplash.com/photo-1598335624115-3f3093f412db?auto=format&fit=crop&q=80&w=800", tag: "Sharp" },
                { id: 12, name: "Copper Mist", price: 35, type: "Sprayer", img: "https://images.unsplash.com/photo-1621980845347-75f190e22757?auto=format&fit=crop&q=80&w=800", tag: "Patina" },
                { id: 13, name: "Wire Set", price: 20, type: "Shaping", img: "https://images.unsplash.com/photo-1599598424675-8025258e2a15?auto=format&fit=crop&q=80&w=800", tag: "Shape" },
                { id: 22, name: "Root Rake", price: 25, type: "Soil", img: "https://images.unsplash.com/photo-1604762524889-3e2fcc145583?auto=format&fit=crop&q=80&w=800", tag: "Pro" },
            ]
        };

        const convertPrice = (price, currencyCode, isDiscounted = false) => {
            const currency = CURRENCIES[currencyCode];
            const finalPrice = isDiscounted ? price * 0.5 : price;
            const converted = Math.round(finalPrice * currency.rate);
            return `${currency.symbol}${converted.toLocaleString()}`;
        };

        const getRawPrice = (price, currencyCode, isDiscounted = false) => {
             const currency = CURRENCIES[currencyCode];
             const finalPrice = isDiscounted ? price * 0.5 : price;
             return Math.round(finalPrice * currency.rate);
        }

        const getSortedProducts = (items, sortOrder) => {
            const sortedItems = [...items];
            if (sortOrder === 'lowToHigh') {
                return sortedItems.sort((a, b) => a.price - b.price);
            } else if (sortOrder === 'highToLow') {
                return sortedItems.sort((a, b) => b.price - a.price);
            }
            return sortedItems;
        };
        
        const useIcons = (deps) => {
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, deps);
        };

        // --- CUSTOM CURSOR (Only logic needed for desktop) ---
        const CustomCursor = () => {
            useEffect(() => {
                // If on a touch device (simple check), we might skip this logic or just rely on CSS
                if (window.matchMedia("(pointer: coarse)").matches) return;

                const cursorDot = document.getElementById('cursor-dot');
                const cursorOutline = document.getElementById('cursor-outline');
                
                const moveCursor = (e) => {
                    const posX = e.clientX;
                    const posY = e.clientY;
                    
                    if (cursorDot) {
                        cursorDot.style.left = `${posX}px`;
                        cursorDot.style.top = `${posY}px`;
                    }
                    if (cursorOutline) {
                        cursorOutline.animate({
                            left: `${posX}px`,
                            top: `${posY}px`
                        }, { duration: 500, fill: "forwards" });
                    }
                };

                const addHover = () => cursorOutline && (cursorOutline.style.transform = "translate(-50%, -50%) scale(1.5)");
                const removeHover = () => cursorOutline && (cursorOutline.style.transform = "translate(-50%, -50%) scale(1)");

                document.addEventListener('mousemove', moveCursor);
                
                const clickables = document.querySelectorAll('a, button, input, select, .cursor-pointer');
                clickables.forEach(el => {
                    el.addEventListener('mouseenter', addHover);
                    el.addEventListener('mouseleave', removeHover);
                });

                return () => {
                    document.removeEventListener('mousemove', moveCursor);
                    clickables.forEach(el => {
                        el.removeEventListener('mouseenter', addHover);
                        el.removeEventListener('mouseleave', removeHover);
                    });
                }
            });
            return null;
        };

        // --- AMBIENT BACKGROUND ---
        const LeafBackground = ({ theme = 'green' }) => {
            const canvasRef = useRef(null);
            useEffect(() => {
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                let animationFrameId;
                let particles = [];
                
                // Reduce particles for mobile
                const isMobile = window.innerWidth < 768;
                const particleCount = isMobile ? 30 : 100;

                const resizeCanvas = () => {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                };

                class Particle {
                    constructor() { this.init(); }
                    init() {
                        this.x = Math.random() * canvas.width;
                        this.y = Math.random() * canvas.height;
                        
                        if (theme === 'sakura') {
                             this.size = Math.random() * 5 + 2; 
                             this.speedY = Math.random() * 1 + 0.5; 
                             this.speedX = Math.random() * 2 - 1; 
                             this.color = Math.random() > 0.5 ? '#fbcfe8' : '#f472b6'; 
                             this.rotation = Math.random() * 360;
                        } else {
                            this.size = Math.random() * 3 + 1; // Smaller, spore-like
                            this.speedY = Math.random() * 0.5 - 0.25;
                            this.speedX = Math.random() * 0.5 - 0.25;
                            this.rotation = 0;
                            this.opacity = Math.random() * 0.5 + 0.1;
                            
                            // Dynamic Theme Colors
                            if (theme === 'gold') this.color = Math.random() > 0.5 ? '#d4af37' : '#ffffff';       // Luxe: Gold/White
                            else if (theme === 'electric') this.color = Math.random() > 0.5 ? '#a855f7' : '#6366f1'; // Delivery: Acid Lime / Purple
                            else if (theme === 'workshop') this.color = '#cbd5e1';    // Tools: Blue/Grey Steel
                            else if (theme === 'green') this.color = '#4ade80';     // Home: Bright Green
                            else this.color = '#ffffff';                         // Fallback
                        }
                        this.opacity = Math.random() * 0.5 + 0.1;
                    }
                    update() {
                        this.x += this.speedX;
                        this.y += this.speedY;
                        this.rotation += 1;
                        if (this.x > canvas.width) this.x = 0;
                        if (this.x < 0) this.x = canvas.width;
                        if (this.y > canvas.height) this.y = 0;
                        if (this.y < 0) this.y = canvas.height;
                    }
                    draw() {
                        ctx.save();
                        ctx.translate(this.x, this.y);
                        if (theme === 'sakura') ctx.rotate(this.rotation * Math.PI / 180);
                        
                        ctx.beginPath();
                        if (theme === 'sakura') ctx.ellipse(0, 0, this.size, this.size/2, 0, 0, Math.PI*2);
                        else ctx.arc(0, 0, this.size, 0, Math.PI * 2);
                        
                        ctx.fillStyle = this.color;
                        ctx.globalAlpha = this.opacity;
                        ctx.fill();
                        
                        ctx.shadowBlur = theme === 'sakura' ? 0 : 0;
                        ctx.restore();
                    }
                }
                
                // Clear existing particles if re-initializing
                particles = [];
                for (let i = 0; i < particleCount; i++) particles.push(new Particle());
                
                const animate = () => {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    particles.forEach(p => { p.update(); p.draw(); });
                    animationFrameId = requestAnimationFrame(animate);
                };
                window.addEventListener('resize', resizeCanvas);
                resizeCanvas();
                animate();
                return () => { window.removeEventListener('resize', resizeCanvas); cancelAnimationFrame(animationFrameId); };
            }, [theme]);
            return <canvas ref={canvasRef} id="leaf-canvas" className="fixed top-0 left-0 w-full h-full pointer-events-none z-0" />;
        };

        const CountdownTimer = ({ small }) => {
            const [time, setTime] = useState(15 * 60);
            useEffect(() => {
                const timer = setInterval(() => setTime((t) => t > 0 ? t - 1 : 0), 1000);
                return () => clearInterval(timer);
            }, []);
            const formatTime = (s) => `${Math.floor(s / 60).toString().padStart(2, '0')}:${(s % 60).toString().padStart(2, '0')}`;
            return <span className={`font-mono font-bold text-white animate-pulse ${small ? 'text-xs' : 'text-3xl'}`}>{formatTime(time)}</span>;
        };

        const ProductModal = ({ product, isOpen, onClose, currency, onAddToCart, t }) => {
            useIcons([isOpen, product]); 
            if (!isOpen || !product) return null;
            const isSale = isFriday && product.blackFriday;
            
            return (
                <div className="fixed inset-0 z-[60] flex items-end md:items-center justify-center p-0 md:p-4 animate-fade-in">
                    {/* Backdrop */}
                    <div className="absolute inset-0 bg-black/90 backdrop-blur-md" onClick={onClose}></div>
                    
                    {/* Modal Content - Scrollable on mobile */}
                    <div className="relative z-70 w-full md:max-w-6xl h-[90vh] md:h-[85vh] bg-[#0a0a0a] border-t md:border border-white/5 overflow-y-auto md:overflow-hidden flex flex-col md:flex-row rounded-t-3xl md:rounded-none">
                        
                        <button onClick={onClose} className="absolute top-4 right-4 md:top-6 md:right-6 z-30 text-white bg-black/50 p-2 rounded-full md:bg-transparent hover:text-accent transition-colors">
                            <i data-lucide="x" className="w-6 h-6 md:w-8 md:h-8"></i>
                        </button>
                        
                        {/* Left: Image (Top on mobile) */}
                        <div className="w-full md:w-3/5 relative h-[50vh] md:h-full bg-[#050505] flex items-center justify-center overflow-hidden shrink-0">
                             <div className="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/concrete-wall.png')]"></div>
                             <img src={product.img} alt={product.name} className="relative z-10 w-[70%] md:w-[80%] max-w-[500px] object-cover animate-float" />
                             <div className="absolute bottom-4 left-6 md:bottom-10 md:left-10 z-20">
                                 <p className="text-white/40 uppercase tracking-[0.2em] text-[10px] md:text-xs mb-2">Botanical Name</p>
                                 <p className="text-xl md:text-2xl serif-font italic text-white/80">{product.scientific}</p>
                             </div>
                        </div>

                        {/* Right: Info (Bottom on mobile) */}
                        <div className="w-full md:w-2/5 p-6 md:p-12 flex flex-col justify-between bg-[#0a0a0a] border-l border-white/5 relative">
                            <div className="mb-8">
                                <span className="inline-block px-3 py-1 border border-accent/30 rounded-full text-accent text-xs uppercase tracking-widest mb-4 md:mb-6">{product.tag}</span>
                                <h2 className="text-4xl md:text-6xl serif-font text-white leading-[0.9] mb-4">{product.name}</h2>
                                <p className="text-lg md:text-xl text-gray-400 font-light leading-relaxed">{product.desc || "A curated piece of living art, grown to inspire."}</p>
                            </div>
                            
                            <div className="space-y-6 md:space-y-8 mt-auto">
                                <div className="flex items-end justify-between border-b border-white/10 pb-4">
                                    <span className="text-gray-500 uppercase text-sm tracking-widest">Price</span>
                                    <div className="text-right">
                                        {isSale && <span className="block text-sm text-red-500 line-through mb-1">{convertPrice(product.price, currency)}</span>}
                                        <span className={`text-3xl md:text-4xl font-light ${isSale ? 'text-accent' : 'text-white'}`}>{convertPrice(product.price, currency, isSale)}</span>
                                    </div>
                                </div>
                                <button onClick={() => { onAddToCart(product); onClose(); }} className="btn-modern w-full py-4 md:py-5 bg-white text-black font-bold uppercase tracking-widest text-sm hover:bg-white/90">
                                    <span>{t.addToCart}</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const ProductCard = ({ product, onOpen, variant = 'glass', currency }) => {
            const isSaleItem = isFriday && product.blackFriday;
            return (
                <div onClick={() => onOpen(product)} className={`${variant === 'japan' ? 'japan-card' : variant === 'luxe' ? 'luxe-card-premium' : variant === 'delivery' ? 'delivery-card' : 'product-card-modern'} group relative cursor-pointer w-full mb-8 md:mb-0`}>
                    <div className="relative aspect-[3/4] overflow-hidden bg-[#0a0a0a] mb-4">
                        <img src={product.img} alt={product.name} className="card-img w-full h-full object-cover opacity-90 md:opacity-80 md:group-hover:opacity-100 transition-opacity duration-500" />
                        
                        {/* Minimal Badge */}
                        <div className="absolute top-4 left-4">
                             <span className="text-[10px] uppercase tracking-widest text-white/60 bg-black/40 backdrop-blur px-2 py-1">{product.tag}</span>
                        </div>
                         {/* Sale Badge */}
                        {isSaleItem && <div className="absolute top-4 right-4 text-accent animate-pulse"><i data-lucide="zap" className="w-4 h-4"></i></div>}

                        {/* Quick Add Overlay - Visible on Hover (Desktop) or click opens modal */}
                        <div className="quick-add hidden md:flex absolute inset-0 items-center justify-center opacity-0 translate-y-4 transition-all duration-500 bg-black/20 backdrop-blur-[2px]">
                             <div className="w-16 h-16 rounded-full border border-white/20 flex items-center justify-center bg-black/50 text-white group-hover:scale-110 transition-transform">
                                <span className="text-xs uppercase tracking-widest">View</span>
                             </div>
                        </div>
                    </div>
                    
                    <div className="flex justify-between items-end border-b border-white/10 pb-2 group-hover:border-accent transition-colors duration-500">
                        <div>
                            <h3 className={`text-lg md:text-xl text-white font-medium leading-tight mb-1 transition-colors ${variant === 'luxe' ? 'group-hover:text-[#d4af37]' : 'group-hover:text-accent'}`}>{product.name}</h3>
                            <p className="text-[10px] md:text-xs text-gray-500 uppercase tracking-widest">{product.scientific || product.vibe}</p>
                        </div>
                        <span className={`text-base md:text-lg font-light ${variant === 'luxe' ? 'text-white' : 'text-white/80'}`}>{convertPrice(product.price, currency, isSaleItem)}</span>
                    </div>
                </div>
            );
        }

        // --- SUB-PAGES REDESIGN (Minimal & Clean) ---
        const CartPage = ({ cart, currency, updateQuantity, removeFromCart, t, setView }) => {
            useIcons([cart]);
            useEffect(() => { window.scrollTo(0, 0); }, []);
            const total = cart.reduce((acc, item) => acc + (getRawPrice(item.price, currency, isFriday && item.blackFriday) * item.qty), 0);

            return (
                <div className="min-h-screen pt-28 md:pt-40 pb-20 container mx-auto px-6 animate-fade-in max-w-5xl relative z-10">
                    <div className="flex items-center justify-between mb-12 md:mb-20 border-b border-white/10 pb-8">
                        <h1 className="text-4xl md:text-6xl serif-font text-white">{t.cart} <span className="text-accent text-xl md:text-2xl align-top">{cart.length}</span></h1>
                        <button onClick={() => setView('home')} className="text-xs md:text-sm uppercase tracking-widest text-gray-400 hover:text-white transition-colors">Close</button>
                    </div>
                    
                    {cart.length === 0 ? (
                        <div className="text-center py-20">
                            <p className="text-xl md:text-2xl text-gray-600 mb-8 font-light italic">"{t.emptyCart}"</p>
                            <button onClick={() => setView('home')} className="btn-modern px-8 py-4 bg-white text-black font-bold uppercase tracking-widest text-xs"><span>{t.continueShop}</span></button>
                        </div>
                    ) : (
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-16">
                            <div className="md:col-span-2 space-y-8 md:space-y-12">
                                {cart.map(item => (
                                    <div key={item.id} className="flex gap-4 md:gap-8 items-start group">
                                        <div className="w-24 md:w-32 aspect-[3/4] bg-gray-900 overflow-hidden shrink-0">
                                            <img src={item.img} className="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-500" />
                                        </div>
                                        <div className="flex-1 pt-1 md:pt-2">
                                            <div className="flex flex-col md:flex-row md:justify-between mb-1 md:mb-2">
                                                <h3 className="text-lg md:text-2xl text-white serif-font">{item.name}</h3>
                                                <span className="text-lg md:text-xl text-gray-300 font-light">{convertPrice(item.price, currency, isFriday && item.blackFriday)}</span>
                                            </div>
                                            <p className="text-[10px] md:text-xs text-gray-500 uppercase tracking-widest mb-4 md:mb-6">{item.scientific}</p>
                                            <div className="flex items-center gap-6">
                                                 <div className="flex items-center border border-white/20 px-2 py-1">
                                                    <button onClick={() => updateQuantity(item.id, -1)} className="text-gray-400 hover:text-white px-2 py-1">-</button>
                                                    <span className="mx-4 text-white font-mono text-sm">{item.qty}</span>
                                                    <button onClick={() => updateQuantity(item.id, 1)} className="text-gray-400 hover:text-white px-2 py-1">+</button>
                                                 </div>
                                                 <button onClick={() => removeFromCart(item.id)} className="text-[10px] md:text-xs uppercase tracking-widest text-red-900 hover:text-red-500 transition-colors">Remove</button>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                            <div className="md:col-span-1">
                                <div className="sticky top-32 p-6 md:p-8 border border-white/10 bg-white/5 backdrop-blur-sm mt-8 md:mt-0">
                                    <h3 className="text-lg text-white mb-6 md:mb-8 uppercase tracking-widest">{t.orderSummary}</h3>
                                    <div className="flex justify-between mb-4 text-sm text-gray-400"><span>{t.subtotal}</span><span className="text-white">{CURRENCIES[currency].symbol}{total.toLocaleString()}</span></div>
                                    <div className="flex justify-between mb-8 text-sm text-gray-400"><span>{t.shipping}</span><span className="text-accent">{t.free}</span></div>
                                    <div className="flex justify-between text-xl text-white serif-font mb-8 pt-4 border-t border-white/10"><span>{t.total}</span><span>{CURRENCIES[currency].symbol}{total.toLocaleString()}</span></div>
                                    <button onClick={() => setView('checkout')} className="btn-modern w-full py-4 bg-accent text-black font-bold uppercase tracking-widest text-xs hover:bg-white"><span>{t.checkout}</span></button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const CheckoutPage = ({ cart, currency, t, setView, clearCart }) => {
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [orderComplete, setOrderComplete] = useState(false);
            useIcons([orderComplete]);
            useEffect(() => { window.scrollTo(0, 0); }, []);
            const total = cart.reduce((acc, item) => acc + (getRawPrice(item.price, currency, isFriday && item.blackFriday) * item.qty), 0);
            
            const handlePlaceOrder = (e) => {
                e.preventDefault();
                setIsSubmitting(true);
                setTimeout(() => { setIsSubmitting(false); setOrderComplete(true); clearCart(); }, 2000);
            };

            if (orderComplete) {
                return (
                    <div className="h-screen flex items-center justify-center animate-fade-in text-center px-6 relative z-10">
                        <div>
                             <h1 className="text-6xl md:text-8xl serif-font text-accent mb-6">Ordered.</h1>
                             <p className="text-gray-400 text-lg md:text-xl font-light mb-12">Nature is making its way to you.</p>
                             <button onClick={() => setView('home')} className="btn-modern px-10 py-4 border border-white text-white hover:bg-white hover:text-black uppercase tracking-widest text-xs font-bold"><span>Return Home</span></button>
                        </div>
                    </div>
                );
            }

            return (
                 <div className="min-h-screen pt-28 md:pt-40 pb-20 container mx-auto px-6 animate-fade-in max-w-6xl relative z-10">
                    <div className="flex items-center gap-4 mb-8 md:mb-16 opacity-50 hover:opacity-100 transition-opacity cursor-pointer w-fit" onClick={() => setView('cart')}>
                        <i data-lucide="arrow-left" className="w-5 h-5 text-white"></i>
                        <span className="text-sm uppercase tracking-widest text-white">{t.backToCart}</span>
                    </div>
                    
                    <h1 className="text-4xl md:text-5xl serif-font text-white mb-8 md:mb-16">{t.checkout}</h1>
                    
                    <form onSubmit={handlePlaceOrder} className="grid grid-cols-1 lg:grid-cols-2 gap-12 md:gap-24">
                        {/* Left Column: Form */}
                        <div className="space-y-12 order-2 lg:order-1">
                            <section>
                                <h2 className="text-xs uppercase tracking-widest text-accent mb-8">{t.shippingDetails}</h2>
                                <div className="space-y-6">
                                    <input required type="text" className="input-modern" placeholder={t.fullName} />
                                    <input required type="email" className="input-modern" placeholder={t.email} />
                                    <input required type="text" className="input-modern" placeholder={t.address} />
                                    <div className="grid grid-cols-2 gap-6">
                                        <input required type="text" className="input-modern" placeholder={t.city} />
                                        <input required type="text" className="input-modern" placeholder={t.zip} />
                                    </div>
                                </div>
                            </section>
                            
                            <section>
                                <h2 className="text-xs uppercase tracking-widest text-accent mb-8">{t.paymentDetails}</h2>
                                <div className="space-y-6">
                                    <input required type="text" className="input-modern" placeholder={t.cardNum} />
                                    <div className="grid grid-cols-2 gap-6">
                                        <input required type="text" className="input-modern" placeholder={t.expiry} />
                                        <input required type="text" className="input-modern" placeholder={t.cvv} />
                                    </div>
                                </div>
                            </section>
                        </div>
                        
                        {/* Right Column: Order Summary with Images */}
                        <div className="flex flex-col order-1 lg:order-2">
                             <div className="bg-white/5 border border-white/10 p-6 md:p-10 backdrop-blur-md mb-8">
                                <h3 className="text-xs uppercase tracking-widest text-accent mb-8">Order Summary</h3>
                                <div className="space-y-6 mb-8 max-h-[400px] overflow-y-auto pr-2">
                                    {cart.map(item => (
                                        <div key={item.id} className="flex items-center gap-4">
                                            <div className="w-16 h-20 bg-gray-900 shrink-0 border border-white/10">
                                                <img src={item.img} alt={item.name} className="w-full h-full object-cover opacity-90" />
                                            </div>
                                            <div className="flex-1 min-w-0">
                                                <h4 className="text-white serif-font text-lg truncate">{item.name}</h4>
                                                <p className="text-[10px] text-gray-500 uppercase tracking-widest">Qty: {item.qty}</p>
                                            </div>
                                            <div className="text-right">
                                                <p className="text-white font-light">{convertPrice(item.price, currency, isFriday && item.blackFriday)}</p>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                <div className="border-t border-white/10 pt-6 flex justify-between items-end">
                                    <span className="text-sm text-gray-400 uppercase tracking-widest">{t.total}</span>
                                    <span className="text-3xl text-white serif-font">{CURRENCIES[currency].symbol}{total.toLocaleString()}</span>
                                </div>
                             </div>

                            <button type="submit" disabled={isSubmitting} className="btn-modern w-full py-6 bg-white text-black font-bold uppercase tracking-[0.2em] text-sm hover:bg-accent transition-colors">
                                {isSubmitting ? <span>Processing...</span> : <span>{t.placeOrder}</span>}
                            </button>
                        </div>
                    </form>
                 </div>
            );
        };

        // --- Component: Navbar (Floating Pill & Mobile Menu) ---
        const Navbar = ({ view, setView, cartCount, currency, setCurrency, language, setLanguage, t, sortOrder, setSortOrder }) => {
            const [scrolled, setScrolled] = useState(false);
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
            useIcons([view, cartCount, mobileMenuOpen]);
            
            useEffect(() => {
                const handler = () => setScrolled(window.scrollY > 50);
                window.addEventListener('scroll', handler);
                return () => window.removeEventListener('scroll', handler);
            }, []);

            // Toggle Mobile Menu
            const toggleMenu = () => setMobileMenuOpen(!mobileMenuOpen);
            const handleNav = (v) => { setView(v); setMobileMenuOpen(false); };

            return (
                <>
                <nav className={`fixed top-0 left-0 w-full z-50 transition-all duration-500 ${scrolled ? 'py-4' : 'py-6 md:py-8'}`}>
                    <div className={`container mx-auto px-6 flex justify-between items-center transition-all duration-500 ${scrolled ? 'glass-panel rounded-full px-6 md:px-8 py-3 max-w-4xl mx-auto' : ''}`}>
                        
                        {/* Logo */}
                        <div className="text-xl md:text-2xl font-bold text-white serif-font tracking-tighter cursor-pointer relative group z-50" onClick={() => handleNav('home')}>
                            BOTANICA
                            <span className="hidden md:block absolute -bottom-1 left-0 w-0 h-[1px] bg-accent transition-all duration-300 group-hover:w-full"></span>
                        </div>

                        {/* Desktop Menu */}
                        <div className="hidden md:flex items-center gap-8">
                             {['luxe', 'japan', 'delivery', 'tools'].map(v => (
                                 <button key={v} onClick={() => setView(v)} className={`text-xs uppercase tracking-widest transition-colors hover:text-accent ${view === v ? 'text-accent' : 'text-gray-400'}`}>
                                     {v === 'luxe' ? t.luxeBtn : v === 'japan' ? t.japanBtn : v === 'delivery' ? t.deliveryBtn : t.toolsBtn}
                                 </button>
                             ))}
                        </div>

                        {/* Actions */}
                        <div className="flex items-center gap-4 md:gap-6 z-50">
                            {/* Currency/Lang (Hidden on mobile scroll to save space) */}
                            <div className={`hidden md:flex items-center gap-4 text-xs font-mono text-gray-400`}>
                                <select value={language} onChange={(e) => setLanguage(e.target.value)} className="bg-transparent outline-none cursor-pointer hover:text-white transition-colors"><option value="EN">EN</option><option value="FR">FR</option><option value="HI">HI</option></select>
                                <span className="text-white/20">/</span>
                                <select value={currency} onChange={(e) => setCurrency(e.target.value)} className="bg-transparent outline-none cursor-pointer hover:text-white transition-colors"><option value="USD">USD</option><option value="EUR">EUR</option><option value="JPY">JPY</option><option value="INR">INR</option></select>
                            </div>
                            
                            {/* Cart Icon */}
                            <button onClick={() => setView('cart')} className="relative group">
                                <span className="hidden md:inline text-xs uppercase tracking-widest text-white group-hover:text-accent transition-colors">{t.cart}</span>
                                <i data-lucide="shopping-bag" className="w-5 h-5 text-white md:hidden"></i>
                                <span className="absolute -top-3 -right-3 text-[10px] font-bold text-black bg-accent w-4 h-4 rounded-full flex items-center justify-center">{cartCount}</span>
                            </button>

                            {/* Mobile Hamburger */}
                            <button onClick={toggleMenu} className="md:hidden text-white focus:outline-none">
                                <i data-lucide={mobileMenuOpen ? "x" : "menu"} className="w-6 h-6"></i>
                            </button>
                        </div>
                    </div>
                </nav>

                {/* Mobile Menu Overlay */}
                {mobileMenuOpen && (
                    <div className="fixed inset-0 z-40 bg-black/95 backdrop-blur-xl flex flex-col items-center justify-center animate-fade-in md:hidden">
                        <div className="flex flex-col gap-8 text-center">
                             {['home', 'luxe', 'japan', 'delivery', 'tools'].map((v, i) => (
                                 <button key={v} onClick={() => handleNav(v)} 
                                    className={`text-3xl serif-font text-white hover:text-accent transition-colors ${view === v ? 'text-accent italic' : ''}`}
                                    style={{ animationDelay: `${i * 0.1}s` }}
                                 >
                                     {v === 'home' ? t.homeBtn : v === 'luxe' ? t.luxeBtn : v === 'japan' ? t.japanBtn : v === 'delivery' ? t.deliveryBtn : t.toolsBtn}
                                 </button>
                             ))}
                        </div>
                        
                        <div className="mt-16 flex gap-8">
                             <select value={language} onChange={(e) => setLanguage(e.target.value)} className="bg-transparent text-gray-400 outline-none text-sm border-b border-gray-800 pb-1">
                                <option value="EN">English</option>
                                <option value="FR">Français</option>
                                <option value="HI">Hindi</option>
                            </select>
                             <select value={currency} onChange={(e) => setCurrency(e.target.value)} className="bg-transparent text-gray-400 outline-none text-sm border-b border-gray-800 pb-1">
                                <option value="USD">USD ($)</option>
                                <option value="EUR">EUR (€)</option>
                                <option value="JPY">JPY (¥)</option>
                                <option value="INR">INR (₹)</option>
                            </select>
                        </div>
                    </div>
                )}
                </>
            );
        };

        // --- HERO SECTION REDESIGN ---
        const Hero = ({ t, setView }) => {
            return (
                <header className="relative h-screen w-full flex items-center justify-center overflow-hidden">
                    {/* Background Image */}
                    <div className="absolute inset-0 z-0">
                         <div className="absolute inset-0 bg-gradient-to-t from-[#14532d] via-transparent to-[#14532d]/40 z-10"></div>
                         <img src="https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?auto=format&fit=crop&q=80&w=2613&ixlib=rb-4.0.3" className="w-full h-full object-cover opacity-60 animate-spin-slow scale-110" style={{ animationDuration: '60s' }} />
                    </div>

                    <div className="relative z-20 text-center mix-blend-difference px-4 w-full">
                        <div className="reveal-container">
                             <p className="reveal-text text-accent uppercase tracking-[0.5em] text-xs md:text-sm mb-4 font-mono">Est. 2025 • Earth</p>
                        </div>
                        <div className="reveal-container">
                             {/* Responsive text size: smaller on mobile, massive on desktop */}
                             <h1 className="reveal-text text-[15vw] md:text-[14vw] leading-[0.9] md:leading-[0.8] font-bold text-white serif-font tracking-tighter" style={{ animationDelay: '0.1s' }}>BOTANICA</h1>
                        </div>
                        <div className="reveal-container mt-8 md:mt-12">
                             <button onClick={() => window.scrollTo(0, window.innerHeight)} className="reveal-text btn-modern px-6 py-3 md:px-8 md:py-3 border border-white text-white uppercase tracking-widest text-[10px] md:text-xs hover:bg-white hover:text-black" style={{ animationDelay: '0.3s' }}>
                                 <span>Explore Collection</span>
                             </button>
                        </div>
                    </div>
                    
                    {/* Floating Decorative Elements - Hidden on mobile for cleanliness */}
                    <div className="absolute bottom-10 left-10 z-20 hidden md:block">
                         <p className="text-xs text-gray-500 font-mono w-40">Curated living artifacts for the modern sanctuary.</p>
                    </div>
                      <div className="absolute bottom-10 right-10 z-20 hidden md:block">
                         <i data-lucide="arrow-down" className="w-6 h-6 text-accent animate-bounce"></i>
                    </div>
                </header>
            )
        }

        // --- Pages ---
        const HomePage = ({ setSelectedProduct, currency, t, setView, sortOrder, setSortOrder }) => {
            useIcons([sortOrder]);
            return (
                <div className="animate-fade-in relative z-10">
                    <Hero t={t} setView={setView} />
                    
                    <main className="container mx-auto px-6 py-20 md:py-32">
                        {/* Filter Bar */}
                        <div className="flex flex-col md:flex-row justify-between items-start md:items-end mb-12 md:mb-20 border-b border-white/10 pb-6 sticky top-20 bg-[#14532d]/80 backdrop-blur z-30 pt-4">
                             <div className="mb-4 md:mb-0">
                                 <h2 className="text-3xl md:text-4xl serif-font text-white mb-2">{t.welcome}</h2>
                                 <p className="text-gray-500 font-mono text-[10px] md:text-xs uppercase tracking-widest">({products.plants.length + products.bonsai.length} Specimens)</p>
                             </div>
                             <div className="flex items-center gap-4 text-xs uppercase tracking-widest text-gray-400 self-end md:self-auto">
                                 <span>{t.sort}</span>
                                 <select value={sortOrder} onChange={(e) => setSortOrder(e.target.value)} className="bg-transparent text-white outline-none cursor-pointer">
                                     <option value="default">Featured</option>
                                     <option value="lowToHigh">Price: Low</option>
                                     <option value="highToLow">Price: High</option>
                                 </select>
                             </div>
                        </div>

                        {/* Responsive Grid */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-12 md:gap-y-20">
                            {getSortedProducts([...products.bonsai, ...products.plants], sortOrder).map((p, i) => (
                                <div key={p.id} className={`${i % 2 === 0 ? 'mt-0' : 'lg:mt-12'}`}>
                                    <ProductCard product={p} onOpen={setSelectedProduct} currency={currency} />
                                </div>
                            ))}
                        </div>
                    </main>
                </div>
            );
        };

        const LuxePage = ({ setSelectedProduct, currency, t, setView, sortOrder }) => {
            useEffect(() => { window.scrollTo(0, 0); }, []);
            useIcons([sortOrder]);
            // UPDATED: Use the specific 'luxe' product list
            const luxeBonsai = products.luxe;
            return (
                <div className="luxe-page text-white animate-fade-in pb-20 pt-28 md:pt-40 relative z-10">
                    <div className="container mx-auto px-6 text-center">
                        <div className="mb-12 animate-float">
                            <div className="w-20 h-20 mx-auto mb-4 flex items-center justify-center">
                                <i data-lucide="gem" className="w-16 h-16 text-[#d4af37]"></i>
                            </div>
                            <h1 className="text-6xl md:text-8xl serif-font gold-gradient-text mb-2 tracking-widest uppercase">Super Luxe</h1>
                            <p className="text-gray-500 uppercase text-sm tracking-[0.5em] poppins-font">The Private Collection</p>
                        </div>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-12 mt-20">
                            {getSortedProducts(luxeBonsai, sortOrder).map(p => (
                                <ProductCard key={p.id} product={p} onOpen={setSelectedProduct} variant="luxe" currency={currency} />
                            ))}
                        </div>
                    </div>
                </div>
            );
        }

        const JapanPage = ({ setSelectedProduct, currency, t, setView, sortOrder }) => {
             useEffect(() => { window.scrollTo(0, 0); }, []);
             useIcons([sortOrder]);
             // UPDATED: Use products.bonsai (which now has the original images)
             return (
                 <div className="japan-page text-white animate-fade-in pb-20 pt-28 md:pt-40 relative z-10 overflow-hidden">
                      <div className="absolute top-20 right-1/2 translate-x-1/2 md:translate-x-0 md:right-20 w-[60vw] h-[60vw] md:w-64 md:h-64 bg-red-600 rounded-full opacity-20 blur-3xl pointer-events-none"></div>

                      <div className="container mx-auto px-6 text-center">
                          <div className="mb-20 md:mb-32 relative z-10">
                              <h1 className="text-6xl md:text-8xl japan-font mb-6 text-red-500">日本の盆栽</h1>
                              <h2 className="text-3xl md:text-4xl serif-font text-white tracking-widest uppercase mb-4">{t.japanBtn}</h2>
                              <p className="text-gray-400 mt-4 italic font-light tracking-wide text-lg">Harmony. Balance. Patience.</p>
                          </div>
                          <div className="grid grid-cols-1 md:grid-cols-3 gap-12">{getSortedProducts(products.bonsai, sortOrder).map(p => <ProductCard key={p.id} product={p} onOpen={setSelectedProduct} variant="japan" currency={currency} />)}</div>
                      </div>
                 </div>
             )
        }

        const DeliveryPage = ({ setSelectedProduct, currency, t, setView, sortOrder }) => {
            useEffect(() => { window.scrollTo(0, 0); }, []);
            useIcons([sortOrder]);
            return (
            <div className="delivery-page text-white animate-fade-in pb-20 relative overflow-hidden">
                {/* Speed Lines */}
                <div className="absolute inset-0 opacity-20 pointer-events-none">
                    <div className="speed-line w-full h-0.5 bg-blue-400 absolute top-[20%]"></div>
                    <div className="speed-line w-full h-0.5 bg-indigo-400 absolute top-[80%] delay-200" style={{animationDelay: '0.2s'}}></div>
                </div>
                
                <div className="container mx-auto px-6 pt-28 md:pt-40 relative z-10">
                    {/* Header Section */}
                    <div className="flex flex-col md:flex-row items-end justify-between mb-16 border-b border-indigo-500/30 pb-8">
                        <div>
                            <h1 className="text-6xl md:text-8xl font-black italic text-white leading-none tracking-tighter">BOTANICA <span className="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400">NOW</span></h1>
                            <p className="text-indigo-200 text-xl mt-4 font-medium flex items-center gap-2">
                                <i data-lucide="rocket" className="w-6 h-6"></i> Instant Delivery.
                            </p>
                        </div>
                        <div className="mt-8 md:mt-0 bg-indigo-900/50 px-8 py-4 rounded-2xl border border-indigo-500/50 backdrop-blur-xl">
                            <span className="text-xs font-bold text-indigo-300 uppercase tracking-widest block mb-1">Next Delivery Cycle</span>
                            <CountdownTimer />
                        </div>
                    </div>

                    {/* Sections */}
                    <div className="mb-20">
                        <h2 className="text-4xl font-bold text-white mb-8 flex items-center gap-3">
                            <span className="p-2 bg-orange-500 rounded-lg"><i data-lucide="sun" className="w-6 h-6 text-white"></i></span> Instant Indian Garden
                        </h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            {getSortedProducts(products.indian, sortOrder).map(p => <ProductCard key={p.id} product={p} onOpen={setSelectedProduct} variant="delivery" currency={currency} />)}
                        </div>
                    </div>
                    
                    <div>
                        <h2 className="text-4xl font-bold text-white mb-8 flex items-center gap-3">
                            <span className="p-2 bg-purple-500 rounded-lg"><i data-lucide="zap" className="w-6 h-6 text-white"></i></span> Speedy Essentials
                        </h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            {getSortedProducts(products.express, sortOrder).map(p => <ProductCard key={p.id} product={p} onOpen={setSelectedProduct} variant="delivery" currency={currency} />)}
                        </div>
                    </div>
                </div>
            </div>
            );
        }

        const GenericPage = ({ title, subtitle, items, setSelectedProduct, currency, sortOrder, className }) => {
             useEffect(() => { window.scrollTo(0, 0); }, []);
             useIcons([sortOrder]);
             return (
                 <div className={`${className} pt-28 md:pt-40 pb-20 container mx-auto px-6 animate-fade-in relative z-10`}>
                      <div className="mb-12 md:mb-20">
                          <h1 className="text-5xl md:text-6xl serif-font text-white mb-4">{title}</h1>
                          <p className="text-gray-500 uppercase tracking-widest text-sm">{subtitle}</p>
                      </div>
                      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 md:gap-12">
                          {getSortedProducts(items, sortOrder).map(p => <ProductCard key={p.id} product={p} onOpen={setSelectedProduct} currency={currency} />)}
                      </div>
                 </div>
             )
        }

        const App = () => {
            const [selectedProduct, setSelectedProduct] = useState(null);
            const [view, setView] = useState('home'); 
            const [currency, setCurrency] = useState('USD');
            const [language, setLanguage] = useState('EN');
            const [sortOrder, setSortOrder] = useState('default');
            const [cart, setCart] = useState([]);
            const [showNotification, setShowNotification] = useState(false); // New State for Toast

            // Custom Cursor Init (Desktop Only)
            CustomCursor();
            // Added showNotification to dependencies so icons inside it render correctly
            useIcons([view, currency, sortOrder, cart.length, showNotification]);

            const t = TRANSLATIONS[language];
            
            // Calculate Theme based on View
            const bgTheme = useMemo(() => {
                if (view === 'luxe') return 'gold';
                if (view === 'japan') return 'sakura'; // Use Sakura for Japan page
                if (view === 'delivery') return 'electric';
                if (view === 'tools') return 'workshop';
                return 'green'; // Default for Home, Cart, Checkout
            }, [view]);

            // --- NEW: Dynamic Background Color Transition ---
            useEffect(() => {
                const bgColors = {
                    home: '#14532d',       // Deep Jungle Green
                    luxe: '#000000',       // Black
                    japan: '#1c1917',      // Warm Dark Stone (Matches provided snippet)
                    delivery: '#1e1b4b',   // Indigo/Midnight
                    tools: '#334155',      // Slate
                    cart: '#020617',
                    checkout: '#020617'
                };
                
                const targetColor = bgColors[view] || '#020617';
                document.body.style.backgroundColor = targetColor;
                
                // Cleanup to default on unmount
                return () => { document.body.style.backgroundColor = '#020617'; };
            }, [view]);

            const addToCart = (product) => {
                setCart(prev => {
                    const existing = prev.find(item => item.id === product.id);
                    if (existing) {
                        return prev.map(item => item.id === product.id ? { ...item, qty: item.qty + 1 } : item);
                    }
                    return [...prev, { ...product, qty: 1 }];
                });
                // Trigger Notification
                setShowNotification(true);
                // Auto-hide after 4 seconds
                setTimeout(() => setShowNotification(false), 4000);
            };

            const removeFromCart = (id) => setCart(prev => prev.filter(item => item.id !== id));

            const updateQuantity = (id, change) => {
                setCart(prev => prev.map(item => {
                    if (item.id === id) {
                        const newQty = item.qty + change;
                        return newQty > 0 ? { ...item, qty: newQty } : item;
                    }
                    return item;
                }));
            };

            const clearCart = () => setCart([]);
            const cartCount = cart.reduce((acc, item) => acc + item.qty, 0);

            return (
                <div className="relative min-h-screen text-white selection:bg-accent selection:text-black transition-colors duration-1000">
                    <LeafBackground theme={bgTheme} />
                    
                    <Navbar 
                        view={view} 
                        setView={setView} 
                        cartCount={cartCount} 
                        currency={currency} 
                        setCurrency={setCurrency} 
                        language={language} 
                        setLanguage={setLanguage} 
                        t={t} 
                        sortOrder={sortOrder} 
                        setSortOrder={setSortOrder}
                    />

                    {/* Toast Notification */}
                    <div className={`fixed bottom-4 left-4 right-4 md:left-auto md:bottom-10 md:right-10 z-[100] transition-all duration-500 transform ${showNotification ? 'translate-y-0 opacity-100' : 'translate-y-10 opacity-0 pointer-events-none'}`}>
                        <div className="glass-panel p-4 md:p-6 flex items-center justify-between gap-4 md:gap-8 border-l-4 border-l-accent bg-[#020617]/90 backdrop-blur-xl max-w-md ml-auto shadow-2xl">
                            <div className="flex items-center gap-4">
                                <div className="text-accent shrink-0">
                                    <i data-lucide="check-circle" className="w-6 h-6"></i>
                                </div>
                                <div>
                                    <h4 className="text-white font-medium text-sm md:text-base serif-font">Added to Collection</h4>
                                    <p className="text-gray-400 text-[10px] md:text-xs mt-1">Ready to grow?</p>
                                </div>
                            </div>
                            <div className="flex items-center gap-3 shrink-0">
                                <button onClick={() => setShowNotification(false)} className="hidden md:block text-gray-500 hover:text-white text-[10px] uppercase tracking-widest px-2 transition-colors">Shop</button>
                                <button onClick={() => { setView('cart'); setShowNotification(false); }} className="bg-accent text-black px-4 py-2 text-[10px] md:text-xs font-bold uppercase tracking-widest hover:bg-white transition-colors">
                                    View Cart
                                </button>
                            </div>
                        </div>
                    </div>

                    <ProductModal 
                        product={selectedProduct} 
                        isOpen={!!selectedProduct} 
                        onClose={() => setSelectedProduct(null)} 
                        currency={currency}
                        onAddToCart={addToCart}
                        t={t}
                    />

                    {view === 'home' && <HomePage setSelectedProduct={setSelectedProduct} currency={currency} t={t} setView={setView} sortOrder={sortOrder} setSortOrder={setSortOrder} />}
                    {view === 'luxe' && <LuxePage setSelectedProduct={setSelectedProduct} currency={currency} t={t} setView={setView} sortOrder={sortOrder} />}
                    {view === 'japan' && <JapanPage setSelectedProduct={setSelectedProduct} currency={currency} t={t} setView={setView} sortOrder={sortOrder} />}
                    {view === 'delivery' && <DeliveryPage setSelectedProduct={setSelectedProduct} currency={currency} t={t} setView={setView} sortOrder={sortOrder} />}
                    {view === 'tools' && <GenericPage className="tools-page" title="The Workshop" subtitle="Professional Gear" items={products.tools} setSelectedProduct={setSelectedProduct} currency={currency} sortOrder={sortOrder} />}
                    
                    {view === 'cart' && <CartPage cart={cart} currency={currency} updateQuantity={updateQuantity} removeFromCart={removeFromCart} t={t} setView={setView} />}
                    {view === 'checkout' && <CheckoutPage cart={cart} currency={currency} t={t} setView={setView} clearCart={clearCart} />}
                    
                    <footer className="py-12 md:py-20 bg-black text-center border-t border-white/10 relative z-10">
                         <h2 className="text-[15vw] md:text-[10vw] serif-font text-white/10 leading-none pointer-events-none select-none">BOTANICA</h2>
                         <div className="flex justify-center gap-6 md:gap-8 mt-8 text-[10px] md:text-xs uppercase tracking-widest text-gray-500">
                             <a href="#" className="hover:text-accent">Instagram</a>
                             <a href="#" className="hover:text-accent">Pinterest</a>
                             <a href="#" className="hover:text-accent">Support</a>
                         </div>
                         <p className="mt-8 text-gray-600 text-[10px] md:text-xs font-mono">© 2025 Botanica. All rights reserved.</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
